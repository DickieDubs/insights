rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Allow public read to all collections by default for now
    // Specific write rules per collection

    match /clients/{clientId} {
      allow read: if true;
      allow write: if true; // Public write for demo
    }

    match /campaigns/{campaignId} {
      allow read: if true;
      allow write: if true; // Public write for demo
    }

    match /surveys/{surveyId} {
      allow read: if true;
      allow create: if true; // Allow anyone to create surveys
      allow update: if true; // Allow anyone to update surveys
      allow delete: if true; // Allow anyone to delete surveys
    }

    match /surveys/{surveyId}/responses/{responseId} {
      allow create: if true; // Allow anyone to submit responses
      allow read: if true;   // Allow anyone to read responses
      // Consider restricting read/write further based on roles in a real app
    }

    match /brandProfile/{profileId} {
      allow read: if true;
      allow write: if true; // Public write for demo (usually restricted)
    }

    match /rewardPrograms/{programId} {
      allow read: if true;
      allow write: if true; // Public write for demo (usually restricted)
    }

    match /redemptionItems/{itemId} {
      allow read: if true;
      allow write: if true; // Public write for demo (usually restricted)
    }

    match /userPreferences/{userId} {
      allow read: if true;
      allow write: if true; // Public write for demo (usually restricted to owning user)
    }

    match /consumers/{consumerId} {
      allow read: if true;
      allow write: if true; // Public write for demo
    }

    match /trends/{trendId} {
      allow read: if true;
      // Writes to trends would typically be handled by a backend or admin process
      // allow write: if false; 
    }

    // Default deny all other access if not explicitly allowed above.
    // match /{document=**} {
    //  allow read, write: if false;
    // }
  }
}
